(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{210:function(e,t,a){e.exports=a(590)},215:function(e,t,a){},216:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);var n,i,r,o,l,c,s,u,b,h,d=a(29),p=a(1),g=a.n(p),f=a(51),m=a.n(f),y=(a(215),a(216),a(43)),v=a(53),j=a(52),O=a(54),S=a(139),k=a(62),w=a(35),E=a(26),z=Object(w.b)("rootStore")(n=Object(w.c)((r=i=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return g.a.createElement("div",null)}}]),t}(p.Component),i.isPrivate=!0,n=r))||n)||n,K=a(90),I=a(3),T=a(207),C=Object(w.b)("rootStore")(o=Object(w.c)(o=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={pageSize:"10",currentPage:1,tagKey:"",tagValue:"",instanceData:[],pageCount:0},a.changePageSize=a.changePageSize.bind(Object(K.a)(a)),a.pageSelectFunc=a.pageSelectFunc.bind(Object(K.a)(a)),a}return Object(O.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(e,t){this.props.rootStore.dataStore.fetchInstances((function(){}))}},{key:"pageSelectFunc",value:function(e){this.setState({currentPage:e})}},{key:"changePageSize",value:function(e){console.log("Setting Pagesize to ".concat(e)),this.setState({pageSize:e})}},{key:"render",value:function(){var e=this.props.match.params.tag_key,t=this.props.match.params.tag_value,a=this.props.rootStore.dataStore.instancesThatMatchTags(e,t,parseInt(this.state.pageSize),this.state.currentPage),n=a[0],i=a[1];return console.log(this.pageSelectFunc),g.a.createElement("div",null,g.a.createElement("br",null),g.a.createElement("h1",null,"Tag"),g.a.createElement("div",null,g.a.createElement("b",null,this.state.tagKey)," ",this.state.tagValue),g.a.createElement("br",null),g.a.createElement(E.Form.Field,{type:"select",name:"pageSize",label:"pagesize",value:this.state.pageSize,onChange:this.changePageSize,options:[{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"},{value:"100",label:"100"}]}),g.a.createElement(T.TablePageSelector,{currentPage:this.state.currentPage,pageCount:i,delta:"1",onClickHandler:this.pageSelectFunc}),g.a.createElement(E.Table,{data:Object(I.m)(n),columns:[{label:"id",dataKey:"id"},{label:"effectiveHourly",dataKey:"effectiveHourly"},{label:"name",dataKey:"name"},{label:"nodeType",dataKey:"nodeType"},{label:"os",dataKey:"os"},{label:"provider",dataKey:"provider"},{label:"region",dataKey:"region"},{label:"resourceIdentifier",dataKey:"resourceIdentifier"},{label:"service",dataKey:"service"},{label:"totalSpend",dataKey:"totalSpend"},{label:"Account ID",dataKey:"vendorAccountId"}]}))}}]),t}(p.Component))||o)||o,P=Object(w.b)("rootStore")(l=Object(w.c)((s=c=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={loading:!0,loadingThing:"tags"},a.props.rootStore.dataStore.fetchTags((function(){a.setState({loading:!1})})),a}return Object(O.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e,t=this.props.match.params.tag_key;t&&t.length>0?(console.log(t),e=this.props.rootStore.dataStore.tagsThatMatchKey(t)):e=this.props.rootStore.dataStore.tags;var a,n=[{label:"Name",dataKey:"name",cellDataGetter:function(e){return e.rowData},cellRenderer:function(e){var t=e.rowData;return g.a.createElement("a",{href:"/tags/".concat(t.key)},t.key)}},{label:"Value",dataKey:"value",cellDataGetter:function(e){return e.rowData},cellRenderer:function(e){var t=e.rowData;return g.a.createElement("a",{href:"/tags/".concat(t.key,"/").concat(t.value)},t.value)}},{label:"Hourly",dataKey:"hourly"},{label:"Monthly",dataKey:"monthly"},{label:"Count",dataKey:"count"},{label:"Cost",dataKey:"cost"}];return a=this.state.loading?"Loading ".concat(this.state.loadingThing,"..."):g.a.createElement(E.Table,{data:Object(I.m)(e),columns:n}),g.a.createElement("div",null,g.a.createElement("br",null),g.a.createElement("h1",null,"Tags"),a)}}]),t}(p.Component),c.isPrivate=!0,l=s))||l)||l,D=Object(w.b)("rootStore")(u=Object(w.c)((h=b=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.rootStore.dataStore.fetchInstances((function(){}))}},{key:"render",value:function(){var e=this.props.rootStore.dataStore.instances;return console.log(Object(I.m)(e)),g.a.createElement("div",null,g.a.createElement("br",null),g.a.createElement("h1",null,"Instances"),g.a.createElement("b",null,"Count: "),Object(I.m)(e).length,g.a.createElement(E.Table,{data:Object(I.m)(e),columns:[{label:"id",dataKey:"id"},{label:"effectiveHourly",dataKey:"effectiveHourly"},{label:"name",dataKey:"name"},{label:"nodeType",dataKey:"nodeType"},{label:"os",dataKey:"os"},{label:"provider",dataKey:"provider"},{label:"region",dataKey:"region"},{label:"resourceIdentifier",dataKey:"resourceIdentifier"},{label:"service",dataKey:"service"},{label:"totalSpend",dataKey:"totalSpend"},{label:"Account ID",dataKey:"vendorAccountId"}]}),";")}}]),t}(p.Component),b.isPrivate=!0,u=h))||u)||u,H=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={redirect:!1,redirect_to:""},a}return Object(O.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.redirect?(this.setState({redirect:!1}),g.a.createElement(S.a,null,g.a.createElement(k.a,{to:this.state.redirect_to}))):g.a.createElement(S.a,null,g.a.createElement("div",{style:{float:"left",position:"relative",height:"100vh"}},g.a.createElement(E.Sidebar,null,g.a.createElement(E.Sidebar.Header,{logo:"Cloud Pricing",onClick:function(){return console.log("logo clicked")},"aria-label":"Return to the home page"}),g.a.createElement("br",null),g.a.createElement(E.Sidebar.Section,null,g.a.createElement(E.Sidebar.Item,{onClick:function(){e.setState({redirect:!0,redirect_to:"/"})},title:"Home",icon:"home",active:!0})),g.a.createElement(E.Sidebar.Section,{label:"reports"},g.a.createElement(E.Sidebar.Item,{onClick:function(){e.setState({redirect:!0,redirect_to:"/tags"})},title:"Tags",icon:"tag",active:!0}),g.a.createElement(E.Sidebar.Item,{onClick:function(){e.setState({redirect:!0,redirect_to:"/instances"})},title:"Instances",icon:"structure",active:!0})))),g.a.createElement("div",{style:{position:"relative",height:"100vh"},className:"app-main-content"},g.a.createElement(E.Content,null,g.a.createElement(k.b,{path:"/",exact:!0,component:z}),g.a.createElement(k.b,{path:"/tags/:tag_key/:tag_value",exact:!0,component:C}),g.a.createElement(k.b,{path:"/tags/:tag_key",exact:!0,component:P}),g.a.createElement(k.b,{path:"/tags",exact:!0,component:P}),g.a.createElement(k.b,{path:"/instances",exact:!0,component:D}))))}}]),t}(g.a.Component);var _=function(){return g.a.createElement("div",{className:"App"},g.a.createElement(H,null),g.a.createElement("footer",null,"Data Last Updated: ","owjefij"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x,M,A,F,R,N,V,G,J,B,L,W,U,$,q,Q,X,Y,Z,ee,te,ae,ne,ie,re,oe,le,ce,se,ue,be,he=a(14),de=a(15),pe=(a(568),a(569)),ge=(a(586),x=function e(t,a){Object(d.a)(this,e),Object(he.a)(this,"key",M,this),Object(he.a)(this,"value",A,this),this.key=t,this.value=a},M=Object(de.a)(x.prototype,"key",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(de.a)(x.prototype,"value",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x),fe=(F=function e(t){Object(d.a)(this,e),Object(he.a)(this,"id",R,this),Object(he.a)(this,"effectiveHourly",N,this),Object(he.a)(this,"name",V,this),Object(he.a)(this,"nodeType",G,this),Object(he.a)(this,"os",J,this),Object(he.a)(this,"provider",B,this),Object(he.a)(this,"region",L,this),Object(he.a)(this,"resourceIdentifier",W,this),Object(he.a)(this,"service",U,this),Object(he.a)(this,"tags",$,this),Object(he.a)(this,"totalSpend",q,this),Object(he.a)(this,"vendorAccountId",Q,this),Object(he.a)(this,"lastSeen",X,this),Object(he.a)(this,"hoursRunning",Y,this),this.id=t.id,this.effectiveHourly=t.effectiveHourly,this.name=t.name,this.nodeType=t.nodeType,this.os=t.os,this.provider=t.provider,this.region=t.region,this.resourceIdentifier=t.resourceIdentifier,this.service=t.service,this.lastSeen=t.lastSeen,this.hoursRunning=t.hoursRunning,this.tags=t.tags.map((function(e){return new ge(e.vendorKey,e.vendorValue)})),this.totalSpend=t.totalSpend,this.vendorAccountId=t.vendorAccountId},R=Object(de.a)(F.prototype,"id",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(de.a)(F.prototype,"effectiveHourly",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(de.a)(F.prototype,"name",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(de.a)(F.prototype,"nodeType",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=Object(de.a)(F.prototype,"os",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Object(de.a)(F.prototype,"provider",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=Object(de.a)(F.prototype,"region",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=Object(de.a)(F.prototype,"resourceIdentifier",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(de.a)(F.prototype,"service",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=Object(de.a)(F.prototype,"tags",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=Object(de.a)(F.prototype,"totalSpend",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=Object(de.a)(F.prototype,"vendorAccountId",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(de.a)(F.prototype,"lastSeen",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(de.a)(F.prototype,"hoursRunning",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F),me=(Z=function e(t,a,n,i){Object(d.a)(this,e),Object(he.a)(this,"key",ee,this),Object(he.a)(this,"value",te,this),Object(he.a)(this,"count",ae,this),Object(he.a)(this,"cost",ne,this),Object(he.a)(this,"hourly",ie,this),Object(he.a)(this,"monthly",re,this),console.log(t),console.log(a),this.key=t,this.value=a,this.hourly=n.hourly,this.count=n.count,this.monthy=n.monthly,this.cost=n.cost},ee=Object(de.a)(Z.prototype,"key",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=Object(de.a)(Z.prototype,"value",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=Object(de.a)(Z.prototype,"count",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=Object(de.a)(Z.prototype,"cost",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=Object(de.a)(Z.prototype,"hourly",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=Object(de.a)(Z.prototype,"monthly",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z),ye=(oe=function(){function e(){Object(d.a)(this,e),Object(he.a)(this,"data",le,this),Object(he.a)(this,"instances",ce,this),Object(he.a)(this,"tags",se,this),Object(he.a)(this,"title",ue,this),Object(he.a)(this,"state",be,this)}return Object(y.a)(e,[{key:"instancesThatMatchTags",value:function(e,t,a,n){var i=[],r=[],o=!1,l=!0,c=!1,s=void 0;try{for(var u,b=function(){var l=u.value;d=!1,l.tags.forEach((function(a){"none"==t?e===a.key&&(d=!0):e===a.key&&t===a.value&&i.push(l)})),"none"==t&&0==d&&r.push(l),p=a+a*(n-1),r.length>p&&!1===o&&(i=r,o=!0)},h=this.instances[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var d,p;b()}}catch(y){c=!0,s=y}finally{try{l||null==h.return||h.return()}finally{if(c)throw s}}var g=1;"none"==t?(0==i.length&&(i=r),g=Math.ceil(r.length/a)):g=Math.ceil(i.length/a),console.log("Returning"),console.log(g),console.log(i),console.log(r);var f=a*(n-1)+1,m=a*(n-1)+a;return console.log("From: ".concat(f)),console.log("To: ".concat(m)),[i.slice(f,m),g]}},{key:"tagsThatMatchKey",value:function(e){var t=[];return this.tags.map((function(a){a.key===e&&t.push(a)})),t}},{key:"instancesThatMatchTagKeys",value:function(e,t){var a=[];return this.instances.map((function(t){0,t.tags.forEach((function(n){e===n.key&&a.push(t)})),0})),a}},{key:"fetchInstances",value:function(e){var t=this;console.log("Getting from /api/v1/instances"),pe.get("/api/v1/instances").then((function(e){return e.data})).then((function(a){t.instances=a.map((function(e){return new fe(e)})),t.state="done",e(t.instances)})).catch((function(e){console.log("in axios ",e),t.state="error"}))}},{key:"load",value:function(e,t){var a=window.localStorage.getItem("".concat(t,"-lastSaved")),n=window.localStorage.getItem("".concat(t,"-lastSaved"));return!!(n&&Date.now-n>300)&&(this[t]=a,!0)}},{key:"save",value:function(e,t){var a=JSON.stringify(Object(I.m)(e));window.localStorage.setItem("".concat(t,"-store"),a),window.localStorage.setItem("".concat(t,"-lastSaved"),Date.now())}},{key:"fetchTags",value:function(e){this.load(t,"tags")&&e(t.tags);var t=this;pe.get("/api/v1/tags").then((function(e){return e.data})).then((function(a){var n=[];a.forEach((function(e){console.log(e);var t=new me(e.key,e.value,e);(t.hourly>0||t.count>0||t.cost>0)&&n.push(t)})),t.tags=n,t.state="done",e(t.tags)})).catch((function(e){console.log("in axios ",e),t.state="error"}))}}]),e}(),le=Object(de.a)(oe.prototype,"data",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"supercalifragilisticexpialidocious"}}),ce=Object(de.a)(oe.prototype,"instances",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),se=Object(de.a)(oe.prototype,"tags",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=Object(de.a)(oe.prototype,"title",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),be=Object(de.a)(oe.prototype,"state",[I.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oe);a(588);m.a.render(g.a.createElement(w.a,{rootStore:new function e(){Object(d.a)(this,e),this.dataStore=new ye(this)}},g.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.0c7d5706.chunk.js.map