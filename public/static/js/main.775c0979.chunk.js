(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{210:function(e,t,a){e.exports=a(590)},215:function(e,t,a){},216:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);var n,r,i,o,l,c,s,u,b,h,d=a(29),g=a(1),p=a.n(g),y=a(51),f=a.n(y),m=(a(215),a(216),a(43)),v=a(53),j=a(52),O=a(54),k=a(139),S=a(62),w=a(35),E=a(21),z=a(3),K=["tag_user_cost_center","tag_user_department"],T=Object(w.b)("rootStore")(n=Object(w.c)((i=r=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={loading:!0,loadingThing:"tags"},a.props.rootStore.dataStore.fetchTags((function(){a.setState({loading:!1})})),a}return Object(O.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e;e=this.props.rootStore.dataStore.summarizedTags(K);var t,a=[{label:"Name",dataKey:"name",cellDataGetter:function(e){return e.rowData},cellRenderer:function(e){var t=e.rowData;return p.a.createElement("a",{href:"/tags/".concat(t.key)},t.key)}},{label:"Value",dataKey:"value",cellDataGetter:function(e){return e.rowData},cellRenderer:function(e){var t=e.rowData;return p.a.createElement("a",{href:"/tags/".concat(t.key,"/").concat(t.value)},t.value)}},{label:"Count",dataKey:"count"},{label:"Hourly",dataKey:"hourly",cellRenderer:function(e){var t=e.rowData;return"$".concat(t.hourly.toFixed(2))}},{label:"Cost",dataKey:"cost",cellRenderer:function(e){var t=e.rowData;return"$".concat(t.cost.toFixed(2))}}];return t=this.state.loading?"Loading ".concat(this.state.loadingThing,"..."):p.a.createElement(E.Table,{data:Object(z.m)(e),columns:a}),p.a.createElement("div",null,p.a.createElement("br",null),p.a.createElement("h1",null,"Summary"),t)}}]),t}(g.Component),r.isPrivate=!0,n=i))||n)||n,I=a(90),D=a(207),C=Object(w.b)("rootStore")(o=Object(w.c)(o=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={pageSize:"10",currentPage:1,tagKey:"",tagValue:"",instanceData:[],pageCount:0},a.changePageSize=a.changePageSize.bind(Object(I.a)(a)),a.pageSelectFunc=a.pageSelectFunc.bind(Object(I.a)(a)),a}return Object(O.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(e,t){this.props.rootStore.dataStore.fetchInstances((function(){}))}},{key:"pageSelectFunc",value:function(e){this.setState({currentPage:e})}},{key:"changePageSize",value:function(e){console.log("Setting Pagesize to ".concat(e)),this.setState({pageSize:e})}},{key:"render",value:function(){var e=this.props.match.params.tag_key,t=this.props.match.params.tag_value,a=this.props.rootStore.dataStore.instancesThatMatchTags(e,t,parseInt(this.state.pageSize),this.state.currentPage),n=a[0],r=a[1];return console.log(this.pageSelectFunc),p.a.createElement("div",null,p.a.createElement("br",null),p.a.createElement("h1",null,"Tag"),p.a.createElement("div",null,p.a.createElement("b",null,this.state.tagKey)," ",this.state.tagValue),p.a.createElement("br",null),p.a.createElement(E.Form.Field,{type:"select",name:"pageSize",label:"pagesize",value:this.state.pageSize,onChange:this.changePageSize,options:[{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"},{value:"100",label:"100"}]}),p.a.createElement(D.TablePageSelector,{currentPage:this.state.currentPage,pageCount:r,delta:"1",onClickHandler:this.pageSelectFunc}),p.a.createElement(E.Table,{data:Object(z.m)(n),columns:[{label:"id",dataKey:"id"},{label:"effectiveHourly",dataKey:"effectiveHourly"},{label:"name",dataKey:"name"},{label:"nodeType",dataKey:"nodeType"},{label:"os",dataKey:"os"},{label:"provider",dataKey:"provider"},{label:"region",dataKey:"region"},{label:"resourceIdentifier",dataKey:"resourceIdentifier"},{label:"service",dataKey:"service"},{label:"totalSpend",dataKey:"totalSpend"},{label:"Account ID",dataKey:"vendorAccountId"}]}))}}]),t}(g.Component))||o)||o,_=Object(w.b)("rootStore")(l=Object(w.c)((s=c=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={loading:!0,loadingThing:"tags"},a.props.rootStore.dataStore.fetchTags((function(){a.setState({loading:!1})})),a}return Object(O.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this.props.match.params.tag_key;t&&t.length>0?(console.log(t),e=this.props.rootStore.dataStore.tagsThatMatchKeys(t)):e=this.props.rootStore.dataStore.tags;var a,n=[{label:"Name",dataKey:"name",cellDataGetter:function(e){return e.rowData},cellRenderer:function(e){var t=e.rowData;return p.a.createElement("a",{href:"/tags/".concat(t.key)},t.key)}},{label:"Value",dataKey:"value",cellDataGetter:function(e){return e.rowData},cellRenderer:function(e){var t=e.rowData;return p.a.createElement("a",{href:"/tags/".concat(t.key,"/").concat(t.value)},t.value)}},{label:"Hourly",dataKey:"hourly"},{label:"Monthly",dataKey:"monthly"},{label:"Count",dataKey:"count"},{label:"Cost",dataKey:"cost"}];return a=this.state.loading?"Loading ".concat(this.state.loadingThing,"..."):p.a.createElement(E.Table,{data:Object(z.m)(e),columns:n}),p.a.createElement("div",null,p.a.createElement("br",null),p.a.createElement("h1",null,"Tags"),a)}}]),t}(g.Component),c.isPrivate=!0,l=s))||l)||l,P=Object(w.b)("rootStore")(u=Object(w.c)((h=b=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.rootStore.dataStore.fetchInstances((function(){}))}},{key:"render",value:function(){var e=this.props.rootStore.dataStore.instances;return console.log(Object(z.m)(e)),p.a.createElement("div",null,p.a.createElement("br",null),p.a.createElement("h1",null,"Instances"),p.a.createElement("b",null,"Count: "),Object(z.m)(e).length,p.a.createElement(E.Table,{data:Object(z.m)(e),columns:[{label:"id",dataKey:"id"},{label:"effectiveHourly",dataKey:"effectiveHourly"},{label:"name",dataKey:"name"},{label:"nodeType",dataKey:"nodeType"},{label:"os",dataKey:"os"},{label:"provider",dataKey:"provider"},{label:"region",dataKey:"region"},{label:"resourceIdentifier",dataKey:"resourceIdentifier"},{label:"service",dataKey:"service"},{label:"totalSpend",dataKey:"totalSpend"},{label:"Account ID",dataKey:"vendorAccountId"}]}),";")}}]),t}(g.Component),b.isPrivate=!0,u=h))||u)||u,H=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(v.a)(this,Object(j.a)(t).call(this,e))).state={redirect:!1,redirect_to:""},a}return Object(O.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.redirect?(this.setState({redirect:!1}),p.a.createElement(k.a,null,p.a.createElement(S.a,{to:this.state.redirect_to}))):p.a.createElement(k.a,null,p.a.createElement("div",{style:{float:"left",position:"relative",height:"100vh"}},p.a.createElement(E.Sidebar,null,p.a.createElement(E.Sidebar.Header,{logo:"Cloud Pricing",onClick:function(){return console.log("logo clicked")},"aria-label":"Return to the home page"}),p.a.createElement("br",null),p.a.createElement(E.Sidebar.Section,null,p.a.createElement(E.Sidebar.Item,{onClick:function(){e.setState({redirect:!0,redirect_to:"/"})},title:"Home",icon:"home",active:!0})),p.a.createElement(E.Sidebar.Section,{label:"reports"},p.a.createElement(E.Sidebar.Item,{onClick:function(){e.setState({redirect:!0,redirect_to:"/tags"})},title:"Tags",icon:"tag",active:!0}),p.a.createElement(E.Sidebar.Item,{onClick:function(){e.setState({redirect:!0,redirect_to:"/instances"})},title:"Instances",icon:"structure",active:!0})))),p.a.createElement("div",{style:{position:"relative",height:"100vh"},className:"app-main-content"},p.a.createElement(E.Content,null,p.a.createElement(S.b,{path:"/",exact:!0,component:T}),p.a.createElement(S.b,{path:"/tags/:tag_key/:tag_value",exact:!0,component:C}),p.a.createElement(S.b,{path:"/tags/:tag_key",exact:!0,component:_}),p.a.createElement(S.b,{path:"/tags",exact:!0,component:_}),p.a.createElement(S.b,{path:"/instances",exact:!0,component:P}))))}}]),t}(p.a.Component);var x=function(){return p.a.createElement("div",{className:"App"},p.a.createElement(H,null),p.a.createElement("footer",null,"Data Last Updated: ","owjefij"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M,R,A,F,N,G,V,J,L,$,B,W,U,q,Q,X,Y,Z,ee,te,ae,ne,re,ie,oe,le,ce,se,ue,be,he,de=a(14),ge=a(15),pe=(a(568),a(569)),ye=(a(586),M=function e(t,a){Object(d.a)(this,e),Object(de.a)(this,"key",R,this),Object(de.a)(this,"value",A,this),this.key=t,this.value=a},R=Object(ge.a)(M.prototype,"key",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(ge.a)(M.prototype,"value",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M),fe=(F=function e(t){Object(d.a)(this,e),Object(de.a)(this,"id",N,this),Object(de.a)(this,"effectiveHourly",G,this),Object(de.a)(this,"name",V,this),Object(de.a)(this,"nodeType",J,this),Object(de.a)(this,"os",L,this),Object(de.a)(this,"provider",$,this),Object(de.a)(this,"region",B,this),Object(de.a)(this,"resourceIdentifier",W,this),Object(de.a)(this,"service",U,this),Object(de.a)(this,"tags",q,this),Object(de.a)(this,"totalSpend",Q,this),Object(de.a)(this,"vendorAccountId",X,this),Object(de.a)(this,"lastSeen",Y,this),Object(de.a)(this,"hoursRunning",Z,this),this.id=t.id,this.effectiveHourly=t.effectiveHourly,this.name=t.name,this.nodeType=t.nodeType,this.os=t.os,this.provider=t.provider,this.region=t.region,this.resourceIdentifier=t.resourceIdentifier,this.service=t.service,this.lastSeen=t.lastSeen,this.hoursRunning=t.hoursRunning,this.tags=t.tags.map((function(e){return new ye(e.vendorKey,e.vendorValue)})),this.totalSpend=t.totalSpend,this.vendorAccountId=t.vendorAccountId},N=Object(ge.a)(F.prototype,"id",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(ge.a)(F.prototype,"effectiveHourly",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(ge.a)(F.prototype,"name",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=Object(ge.a)(F.prototype,"nodeType",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=Object(ge.a)(F.prototype,"os",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=Object(ge.a)(F.prototype,"provider",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Object(ge.a)(F.prototype,"region",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=Object(ge.a)(F.prototype,"resourceIdentifier",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(ge.a)(F.prototype,"service",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=Object(ge.a)(F.prototype,"tags",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=Object(ge.a)(F.prototype,"totalSpend",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(ge.a)(F.prototype,"vendorAccountId",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(ge.a)(F.prototype,"lastSeen",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=Object(ge.a)(F.prototype,"hoursRunning",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F),me=(ee=function e(t,a,n,r){Object(d.a)(this,e),Object(de.a)(this,"key",te,this),Object(de.a)(this,"value",ae,this),Object(de.a)(this,"count",ne,this),Object(de.a)(this,"cost",re,this),Object(de.a)(this,"hourly",ie,this),Object(de.a)(this,"monthly",oe,this),console.log(t),console.log(a),this.key=t,this.value=a,this.hourly=n.hourly,this.count=n.count,this.monthly=n.monthly,this.cost=n.cost},te=Object(ge.a)(ee.prototype,"key",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=Object(ge.a)(ee.prototype,"value",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=Object(ge.a)(ee.prototype,"count",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=Object(ge.a)(ee.prototype,"cost",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=Object(ge.a)(ee.prototype,"hourly",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=Object(ge.a)(ee.prototype,"monthly",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee),ve=(le=function(){function e(){Object(d.a)(this,e),Object(de.a)(this,"data",ce,this),Object(de.a)(this,"instances",se,this),Object(de.a)(this,"tags",ue,this),Object(de.a)(this,"title",be,this),Object(de.a)(this,"state",he,this)}return Object(m.a)(e,[{key:"instancesThatMatchTags",value:function(e,t,a,n){var r=[],i=[],o=!1,l=!0,c=!1,s=void 0;try{for(var u,b=function(){var l=u.value;d=!1,l.tags.forEach((function(a){"none"===t?e===a.key&&(d=!0):e===a.key&&t===a.value&&r.push(l)})),"none"===t&&!1===d&&i.push(l),g=a+a*(n-1),i.length>g&&!1===o&&(r=i,o=!0)},h=this.instances[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var d,g;b()}}catch(m){c=!0,s=m}finally{try{l||null==h.return||h.return()}finally{if(c)throw s}}var p=1;"none"===t?(0===r.length&&(r=i),p=Math.ceil(i.length/a)):p=Math.ceil(r.length/a);var y=a*(n-1)+1,f=a*(n-1)+a;return[r.slice(y,f),p]}},{key:"summarizedTags",value:function(e){var t={};this.tagsThatMatchKeys(e).forEach((function(e){if(e.key in t||(t[e.key]={}),"none"===e.value)t[e.key].none=e;else if("not-none"in t[e.key]){var a=t[e.key]["not-none"],n=a.cost+e.cost,r=a.count+e.count,i=a.hourly+e.hourly,o=a.monthly+e.monthly;t[e.key]["not-none"]=new me(e.key,e.value,{key:e.key,value:"Not None",cost:n,count:r,hourly:i,monthly:o})}else t[e.key]["not-none"]=e}));var a=[];return console.log(t),Object.keys(t).forEach((function(e,n){console.log(e),Object.keys(t[e]).forEach((function(n,r){a.push(t[e][n])}))})),console.log(a),a}},{key:"tagsThatMatchKeys",value:function(e){var t=[];return this.tags.map((function(a){("object"===typeof e&&e.includes(a.key)||"string"===typeof e&&e===a.key)&&t.push(a)})),t}},{key:"instancesThatMatchTagKeys",value:function(e,t){var a=[];return this.instances.map((function(t){0,t.tags.forEach((function(n){e===n.key&&a.push(t)})),0})),a}},{key:"fetchInstances",value:function(e){var t=this;console.log("Getting from /api/v1/instances"),pe.get("/api/v1/instances").then((function(e){return e.data})).then((function(a){t.instances=a.map((function(e){return new fe(e)})),t.state="done",e(t.instances)})).catch((function(e){console.log("in axios ",e),t.state="error"}))}},{key:"load",value:function(e,t){var a=window.localStorage.getItem("".concat(t,"-lastSaved")),n=window.localStorage.getItem("".concat(t,"-lastSaved"));return!!(n&&Date.now-n>300)&&(this[t]=a,!0)}},{key:"save",value:function(e,t){var a=JSON.stringify(Object(z.m)(e));window.localStorage.setItem("".concat(t,"-store"),a),window.localStorage.setItem("".concat(t,"-lastSaved"),Date.now())}},{key:"fetchTags",value:function(e){this.load(t,"tags")&&e(t.tags);var t=this;pe.get("/api/v1/tags").then((function(e){return e.data})).then((function(a){var n=[];a.forEach((function(e){console.log(e);var t=new me(e.key,e.value,e);(t.hourly>0||t.count>0||t.cost>0)&&n.push(t)})),t.tags=n,t.state="done",e(t.tags)})).catch((function(e){console.log("in axios ",e),t.state="error"}))}}]),e}(),ce=Object(ge.a)(le.prototype,"data",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"supercalifragilisticexpialidocious"}}),se=Object(ge.a)(le.prototype,"instances",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=Object(ge.a)(le.prototype,"tags",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=Object(ge.a)(le.prototype,"title",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),he=Object(ge.a)(le.prototype,"state",[z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),le);a(588);f.a.render(p.a.createElement(w.a,{rootStore:new function e(){Object(d.a)(this,e),this.dataStore=new ve(this)}},p.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.775c0979.chunk.js.map